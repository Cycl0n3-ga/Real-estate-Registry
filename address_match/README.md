# ä¸å‹•ç”¢äº¤æ˜“åœ°å€æ¨¡ç³Šæœå°‹å·¥å…· (v2 é«˜æ•ˆèƒ½ç‰ˆ)

`address_match` æ˜¯ä¸€å€‹å°ˆç‚ºå°ç£ä¸å‹•ç”¢å¯¦åƒ¹ç™»éŒ„è³‡æ–™è¨­è¨ˆçš„æ¥µé€Ÿåœ°å€æœå°‹æ¨¡çµ„ã€‚é€é**é å…ˆåˆ†é›¢åœ°å€çµæ§‹**ã€**SQLite æ•¸å€¼å„ªåŒ–**ã€ä»¥åŠ**ä¸‰æ®µå¼æ™ºæ…§æœå°‹ç­–ç•¥**ï¼Œå°‡åŸæœ¬éœ€è¦æ•¸åˆ†é˜çš„å…¨è¡¨æƒææœå°‹ï¼Œç¸®çŸ­è‡³ **0.1 ç§’** å…§å³å¯å®Œæˆã€‚

## ğŸš€ æ•ˆèƒ½èˆ‡å„ªåŒ–äº®é»

- **å·¨å¹…æ•ˆèƒ½æå‡**ï¼šè—‰ç”± B-Tree è¤‡åˆç´¢å¼•ï¼Œ95% æŸ¥è©¢å°‡æ–¼ `0.1s` ç§’æŸ¥å›å ±ã€‚
- **ä¸‰æ®µæ™ºæ…§æœå°‹ (Fallback Strategy)**ï¼š
  1. **çµæ§‹åŒ–ç´¢å¼•æœå°‹ (é¦–é¸)**ï¼šå°‡è¼¸å…¥ï¼ˆå¦‚ï¼š`ä¿¡ç¾©å€æ¾æ™ºè·¯1è™Ÿ`ï¼‰è‡ªå‹•æ‹†è§£ç‚º `district`, `street`, `number` ä¸¦èµ°ç´¢å¼•æ¯”å°ã€‚
  2. **FTS5 å…¨æ–‡æª¢ç´¢**ï¼šé‡å°ä¸è¦å‰‡çš„è¼¸å…¥æ–‡å­—ï¼Œåº•å±¤é€éå€’æ’ç´¢å¼•é«˜é€ŸåŒ¹é…ã€‚
  3. **LIKE è®Šé«”æœå°‹ (æœ€å¾Œå‚™æ´)**ï¼šè‡ªå‹•ç”¢ç”Ÿæ•¸åç¨®å…¨å½¢/åŠå½¢ã€ä¸­æ–‡æ•¸å­—è®Šé«”ï¼ˆ`ï¼•`ã€`äº”`ã€`5`ï¼‰å»æ’ˆå–æ¥µç«¯é«’è³‡æ–™ã€‚
- **å¤šé‡ã€Œä¹‹ã€èˆ‡è¤‡é›œé–€ç‰Œè§£æ**ï¼šé‡å°å°ç£ç‰¹æœ‰è¤‡é›œé–€ç‰Œè¦å‰‡ï¼ˆå¦‚ `53ä¹‹8è™Ÿ`ã€`53è™Ÿ12æ¨“ä¹‹8` ä»¥åŠ `è™Ÿä¹‹` ç­‰ï¼‰ï¼Œèƒ½æº–ç¢ºæ‹†åˆ†ç‚º `number` èˆ‡ `sub_number`ï¼Œè§£æ±ºéå¾€é»åœ¨ä¸€èµ·ç„¡æ³•æº–ç¢ºæ¯”å°çš„å•é¡Œã€‚
- **è·¯åæ®µæ•¸æ¨™æº–åŒ–**ï¼šè·¯åæ®µæ•¸çµ±ä¸€ä½¿ç”¨**åœ‹å­—**ï¼ˆå¦‚ `å¸‚æ°‘å¤§é“ä¸‰æ®µ`ï¼‰ï¼Œç„¡è«–è¼¸å…¥æ˜¯ `3æ®µ` é‚„æ˜¯ `ä¸‰æ®µ` éƒ½èƒ½ç²¾æº–åŒ¹é…ï¼Œä¸”é¡¯ç¤ºæ ¼å¼æ¨™æº–çµ±ä¸€ã€‚
- **ç²¾ç¢ºå··å¼„åŒ¹é…**ï¼šæœå°‹ `53è™Ÿ` ä¸æœƒéŒ¯èª¤åŒ¹é…åˆ° `143å··53è™Ÿ`ï¼Œç¢ºä¿ç•™çµæœå±¬æ–¼åŒä¸€æ£Ÿå»ºç¯‰æˆ–ç¤¾å€ã€‚
- **æ”¯æ´å¤šå…ƒæ¨“å±¤æ ¼å¼**ï¼šæ”¯æ´ `3F`, `3å±¤`, `ä¸‰æ¨“` ç­‰å¤šç¨®æ¨“å±¤è¼¸å…¥èˆ‡è§£æï¼Œè¼¸å‡ºæ ¼å¼çµ±ä¸€ç‚ºä¹¾æ·¨çš„ `3F` æ ¼å¼ã€‚
- **ä¹¾æ·¨åŠå½¢è¡¨æ ¼è¼¸å‡º**ï¼šå»é™¤å¯¦åƒ¹ç™»éŒ„åŸå§‹è³‡æ–™ä¸­é›œäº‚çš„å…¨å½¢å­—å…ƒèˆ‡é«’å­—ï¼ˆå¦‚ `ï¼•ï¼“ä¹‹ï¼˜è™ŸåäºŒæ¨“`ï¼‰ï¼Œå…¨é¢æ›¿æ›ç‚ºä¹¾æ·¨æ˜“è®€çš„æ ¼å¼åŒ–åœ°å€ï¼ˆå¦‚ `53è™Ÿ12Fä¹‹8`ï¼‰ã€‚
- **å„²å­˜å„ªåŒ–**ï¼šå…¨é¢æ”¹ç”¨åŸç”Ÿ `INTEGER` / `REAL` å„²å­˜é¢ç©èˆ‡åƒ¹æ ¼ï¼Œè³‡æ–™åº«é«”ç©ç¸®æ¸› 30% ä¸¦å¤§å¹…é™ä½ I/O æˆæœ¬ã€‚
- **åŸ·è¡Œç·’å®‰å…¨**ï¼šé€£ç·šå¿«å–ä½¿ç”¨ `threading.local()` å¯¦ç¾ per-thread éš”é›¢ï¼Œå¯å®‰å…¨åœ¨ Flask ç­‰å¤šåŸ·è¡Œç·’ç’°å¢ƒä¸­ä½¿ç”¨ã€‚

## ğŸ—ï¸ æ¶æ§‹æ¦‚è¦½

```
address_match/
â”œâ”€â”€ __init__.py        # æ¨¡çµ„åŒ¯å‡º (search_address, search_address_batch, SORT_OPTIONS)
â”œâ”€â”€ address_match.py   # æœå°‹å¼•æ“æ ¸å¿ƒï¼ˆä¸‰æ®µæœå°‹ç­–ç•¥ + ç¯©é¸ + CLIï¼‰
â””â”€â”€ README.md

ä¾è³´å…±ç”¨æ¨¡çµ„:
  land/address_utils.py  # åœ°å€æ­£è¦åŒ–ã€è§£æã€æ•¸å­—è½‰æ›ã€è®Šé«”ç”¢ç”Ÿã€parse_range
```

### æœå°‹ç­–ç•¥æµç¨‹

```
ä½¿ç”¨è€…è¼¸å…¥åœ°å€
  â”‚
  â–¼
parse_query() è§£æç‚ºçµæ§‹åŒ–æ¢ä»¶ (street, lane, number, ...)
  â”‚
  â”œâ”€ æœ‰ street? â”€â”€â”€ Yes â”€â”€â–¶ ç­–ç•¥ 1: çµæ§‹åŒ–ç´¢å¼•æœå°‹ (6 å€‹æ¼¸é€²å¯¬é¬†å±¤ç´š)
  â”‚                              â”‚
  â”‚                         æœ‰çµæœ? â”€â”€ Yes â”€â”€â–¶ âœ… å›å‚³
  â”‚                              â”‚
  â”‚                              No
  â”‚                              â–¼
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ç­–ç•¥ 2: FTS5 å…¨æ–‡æœå°‹
  â”‚                              â”‚
  â”‚                         æœ‰çµæœ? â”€â”€ Yes â”€â”€â–¶ âœ… å›å‚³
  â”‚                              â”‚
  â”‚                              No
  â”‚                              â–¼
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ç­–ç•¥ 3: LIKE è®Šé«”æœå°‹ (æœ€å¤š 8 å€‹è®Šé«”)
                                 â”‚
                            âœ… å›å‚³ (å¯èƒ½ç‚ºç©º)
```

## ğŸ Python API (æ¨¡çµ„åŒ–ä½¿ç”¨)

### åŸºæœ¬æœå°‹

```python
from address_match import search_address

# æœ€ç°¡å‘¼å«
result = search_address("ä¸‰æ°‘è·¯29å··")

# å¸¶ç¯©é¸æ¢ä»¶
result = search_address(
    "æ—¥èˆˆä¸€è¡—52è™Ÿ",
    filters={
        'building_types': ['ä½å®…å¤§æ¨“'],
        'rooms': [3],
        'year_min': 110,
        'year_max': 114,
        'ping_min': 20,
        'ping_max': 40,
    },
    sort_by='unit_price',
    limit=50,
)

print(f"æœå°‹ç­–ç•¥: {result['method']}")
print(f"å…± {result['total']} ç­†")
for row in result['results']:
    print(f"  {row['address']} - {row['total_price']}å…ƒ")
```

### æ‰¹æ¬¡æœå°‹

```python
from address_match import search_address_batch

addresses = ["ä¸‰æ°‘è·¯29å··", "æ—¥èˆˆä¸€è¡—52è™Ÿ", "å¿ å­æ±è·¯ä¸‰æ®µ130è™Ÿ"]
results = search_address_batch(addresses, limit=50)

for r in results:
    print(f"{r['query']}: {r['total']} ç­† ({r.get('method', '')})")
```

### å›å‚³å€¼çµæ§‹

```python
{
    'query': str,         # åŸå§‹æŸ¥è©¢
    'parsed': dict,       # è§£æçµæœ {street, lane, alley, number, ...}
    'method': str,        # ä½¿ç”¨çš„æœå°‹ç­–ç•¥ ('çµæ§‹åŒ–ç´¢å¼•' | 'FTS5 å…¨æ–‡' | 'LIKE è®Šé«”')
    'variants': list,     # æœå°‹è®Šé«”åˆ—è¡¨ (åƒ… LIKE ç­–ç•¥æ™‚æ‰ç”Ÿæˆ)
    'filters': dict,      # ä½¿ç”¨çš„ç¯©é¸æ¢ä»¶
    'sort_by': str,       # æ’åºæ–¹å¼
    'total': int,         # çµæœæ•¸é‡
    'results': list,      # äº¤æ˜“è¨˜éŒ„ list[dict]
    'show_sql': bool,     # æ˜¯å¦é¡¯ç¤ºé™¤éŒ¯è³‡è¨Š
}
```

### ç¯©é¸åƒæ•¸ (filters dict)

| Key | å‹æ…‹ | èªªæ˜ |
|---|---|---|
| `building_types` | `list[str]` | å»ºç‰©å‹æ…‹ (æ¨¡ç³Š, å¯å¤šé¸) |
| `rooms` | `list[int]` | æˆ¿æ•¸ (å¯å¤šé¸) |
| `public_ratio_min` | `float` | å…¬è¨­æ¯”ä¸‹é™ (%) |
| `public_ratio_max` | `float` | å…¬è¨­æ¯”ä¸Šé™ (%) |
| `year_min` | `int` | æ°‘åœ‹å¹´ä¸‹é™ |
| `year_max` | `int` | æ°‘åœ‹å¹´ä¸Šé™ |
| `ping_min` | `float` | åªæ•¸ä¸‹é™ |
| `ping_max` | `float` | åªæ•¸ä¸Šé™ |
| `unit_price_min` | `float` | å–®åªè¬å…ƒä¸‹é™ |
| `unit_price_max` | `float` | å–®åªè¬å…ƒä¸Šé™ |
| `price_min` | `float` | ç¸½åƒ¹è¬å…ƒä¸‹é™ |
| `price_max` | `float` | ç¸½åƒ¹è¬å…ƒä¸Šé™ |

### æ’åºé¸é … (SORT_OPTIONS)

| Key | èªªæ˜ |
|---|---|
| `date` | æˆäº¤æ—¥æœŸâ†“ (é è¨­) |
| `price` | ç¸½åƒ¹â†“ |
| `unit_price` | å–®åªåƒ¹â†“ |
| `count` | åŒåœ°å€ç­†æ•¸â†“ |
| `ping` | åªæ•¸â†“ |
| `public_ratio` | å…¬è¨­æ¯”â†‘ (ä½å„ªå…ˆ) |

## ğŸŒ èˆ‡ web server æ•´åˆ

`web/server.py` ä½¿ç”¨æœ¬æ¨¡çµ„ä½œç‚ºæœå°‹å¾Œç«¯ï¼š

```python
from address_match import search_address
from address_utils import parse_query, normalize_address

# åœ¨ API handler ä¸­:
result = search_address(keyword, db_path=DB_PATH, filters=filters, limit=500)
transactions = result.get("results", [])
```

æ¨¡çµ„çš„é€£ç·šå¿«å–ä½¿ç”¨ `threading.local()` ç¢ºä¿åŸ·è¡Œç·’å®‰å…¨ï¼Œå¯ç›´æ¥åœ¨ Flask å¤šç·šç¨‹ç’°å¢ƒä½¿ç”¨ã€‚

## ğŸ“Š è³‡æ–™åº« Schema (`land_data.db`)

è³‡æ–™è¡¨ï¼š**`land_transaction`**

### åŸå§‹æ¬„ä½ï¼ˆä¾†è‡ª CSVï¼‰

| æ¬„ä½åç¨± | å‹æ…‹ | èªªæ˜ |
|---|---|---|
| `id` | INTEGER (PK) | è‡ªå‹•éå¢ä¸»éµ |
| `raw_district` | TEXT | åŸå§‹é„‰é®å¸‚å€ |
| `transaction_type` | TEXT | äº¤æ˜“æ¨™çš„ï¼ˆæˆ¿åœ°ã€è»Šä½ç­‰ï¼‰ |
| `address` | TEXT | åœŸåœ°ä½ç½®æˆ–å»ºç‰©é–€ç‰Œåœ°å€ |
| `land_area` | REAL | åœŸåœ°ç§»è½‰ç¸½é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰ |
| `urban_zone` | TEXT | éƒ½å¸‚åœŸåœ°ä½¿ç”¨åˆ†å€ |
| `non_urban_zone` | TEXT | ééƒ½å¸‚åœŸåœ°ä½¿ç”¨åˆ†å€ |
| `non_urban_use` | TEXT | ééƒ½å¸‚åœŸåœ°ä½¿ç”¨åœ°é¡åˆ¥ |
| `transaction_date` | TEXT | äº¤æ˜“å¹´æœˆæ—¥ï¼ˆæ°‘åœ‹ï¼‰ |
| `transaction_count` | TEXT | äº¤æ˜“ç­†æ£Ÿæ•¸ |
| `floor_level` | TEXT | ç§»è½‰å±¤æ¬¡ |
| `total_floors` | TEXT | ç¸½æ¨“å±¤æ•¸ |
| `building_type` | TEXT | å»ºç‰©å‹æ…‹ï¼ˆå…¬å¯“ã€ä½å®…å¤§æ¨“ç­‰ï¼‰ |
| `main_use` | TEXT | ä¸»è¦ç”¨é€” |
| `main_material` | TEXT | ä¸»è¦å»ºæ |
| `build_date` | TEXT | å»ºç¯‰å®Œæˆå¹´æœˆ |
| `building_area` | REAL | å»ºç‰©ç§»è½‰ç¸½é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰ |
| `rooms` | INTEGER | éš”é–“ï¼ˆæˆ¿ï¼‰ |
| `halls` | INTEGER | éš”é–“ï¼ˆå»³ï¼‰ |
| `bathrooms` | INTEGER | éš”é–“ï¼ˆè¡›ï¼‰ |
| `partitioned` | TEXT | æœ‰ç„¡éš”é–“ |
| `has_management` | TEXT | æœ‰ç„¡ç®¡ç†çµ„ç¹” |
| `total_price` | INTEGER | ç¸½åƒ¹ï¼ˆå…ƒï¼‰ |
| `unit_price` | REAL | å–®åƒ¹ï¼ˆå…ƒ/å¹³æ–¹å…¬å°ºï¼‰ |
| `parking_type` | TEXT | è»Šä½é¡åˆ¥ |
| `parking_area` | REAL | è»Šä½ç§»è½‰ç¸½é¢ç©ï¼ˆå¹³æ–¹å…¬å°ºï¼‰ |
| `parking_price` | INTEGER | è»Šä½ç¸½åƒ¹ï¼ˆå…ƒï¼‰ |
| `note` | TEXT | å‚™è¨» |
| `serial_no` | TEXT | ç·¨è™Ÿ |
| `main_area` | REAL | ä¸»å»ºç‰©é¢ç© |
| `attached_area` | REAL | é™„å±¬å»ºç‰©é¢ç© |
| `balcony_area` | REAL | é™½å°é¢ç© |
| `elevator` | TEXT | æœ‰ç„¡é›»æ¢¯ |
| `transfer_no` | TEXT | ç§»è½‰ç·¨è™Ÿ |

### è§£æå¾Œåœ°å€æ¬„ä½ï¼ˆç”± `address` è‡ªå‹•æ‹†è§£ï¼‰

| æ¬„ä½åç¨± | å‹æ…‹ | èªªæ˜ |
|---|---|---|
| `county_city` | TEXT | ç¸£å¸‚ï¼ˆä¾‹ï¼šå°åŒ—å¸‚ï¼‰ |
| `district` | TEXT | é„‰é®å¸‚å€ï¼ˆä¾‹ï¼šå¤§å®‰å€ï¼‰ |
| `village` | TEXT | é‡Œï¼ˆä¾‹ï¼šæ­£ç¾©é‡Œï¼‰ |
| `street` | TEXT | è¡—è·¯åï¼ˆä¾‹ï¼šå¿ å­æ±è·¯3æ®µï¼‰ |
| `lane` | TEXT | å··è™Ÿ |
| `alley` | TEXT | å¼„è™Ÿ |
| `number` | TEXT | é–€ç‰Œè™Ÿï¼ˆä¾‹ï¼š12ä¹‹3ï¼‰ |
| `floor` | TEXT | æ¨“å±¤ |
| `sub_number` | TEXT | æ¨“ä¹‹å¹¾ï¼ˆä¾‹ï¼šä¹‹2ï¼‰ |

### é ç•™æ¬„ä½ï¼ˆç›®å‰ç‚º NULLï¼‰

| æ¬„ä½åç¨± | å‹æ…‹ | èªªæ˜ |
|---|---|---|
| `community_name` | TEXT | ç¤¾å€åç¨± |
| `lat` | REAL | ç·¯åº¦ |
| `lng` | REAL | ç¶“åº¦ |

### è™›æ“¬è¡¨ï¼š`address_fts`ï¼ˆFTS5 å…¨æ–‡æª¢ç´¢ï¼‰

å° `address` æ¬„ä½å»ºç«‹å€’æ’ç´¢å¼•ï¼ˆtokenize=`unicode61`ï¼‰ï¼Œå°æ‡‰ `land_transaction.id`ï¼Œå¯ç”¨ `MATCH` èªæ³•é€²è¡Œåœ°å€å…¨æ–‡æœå°‹ã€‚

### ç´¢å¼•

| ç´¢å¼•åç¨± | æ¬„ä½ | èªªæ˜ |
|---|---|---|
| `idx_county_city` | `county_city` | ç¸£å¸‚å–®æ¬„ç´¢å¼• |
| `idx_district` | `district` | è¡Œæ”¿å€å–®æ¬„ç´¢å¼• |
| `idx_street` | `street` | è¡—è·¯å–®æ¬„ç´¢å¼• |
| `idx_lane` | `lane` | å··å–®æ¬„ç´¢å¼• |
| `idx_number` | `number` | é–€ç‰Œè™Ÿå–®æ¬„ç´¢å¼• |
| `idx_floor` | `floor` | æ¨“å±¤å–®æ¬„ç´¢å¼• |
| `idx_date` | `transaction_date` | äº¤æ˜“æ—¥æœŸç´¢å¼• |
| `idx_price` | `total_price` | ç¸½åƒ¹ç´¢å¼• |
| `idx_serial` | `serial_no` | ç·¨è™Ÿç´¢å¼• |
| `idx_addr_combo` | `county_city, district, street, lane, number` | åœ°å€è¤‡åˆç´¢å¼•ï¼ˆæœ€å¸¸ç”¨æŸ¥è©¢è·¯å¾‘ï¼‰ |

## ğŸ’» CLI ä½¿ç”¨æ–¹å¼

### åŸºæœ¬æœå°‹

è‡ªå‹•æ”¯æ´å…¨åŠå½¢åŠä¸­æ–‡æ•¸å­—è½‰æ›ï¼š

```bash
cd /home/cyclone/land

# æœå°‹ç‰¹å®šå··å¼„
python3 address_match/address_match.py "ä¸‰æ°‘è·¯29å··"

# åŒ…å«é–€ç‰Œè™Ÿç¢¼
python3 address_match/address_match.py "æ—¥èˆˆä¸€è¡—52è™Ÿ"

# åŒ…å«å®Œæ•´ç¸£å¸‚å€èˆ‡æ¨“å±¤
python3 address_match/address_match.py "å°åŒ—å¸‚æ¾å±±å€ä¸‰æ°‘è·¯29å··1è™Ÿ3æ¨“"
```

### ğŸ” æ¢ä»¶ç¯©é¸ `--XXX`

ä½ å¯ä»¥è‡ªç”±çµ„åˆå¤šå€‹åƒæ•¸ä¾†ç²¾æº–éæ¿¾æˆ¿ç”¢ï¼š

- `--type` (å»ºç‰©å‹æ…‹)ï¼šæ”¯æ´å¤šé¸ã€æ¨¡ç³Šæœå°‹ï¼ˆä¾‹å¦‚æ‰¾ `å…¬å¯“`ã€`ä½å®…å¤§æ¨“`ï¼‰
- `--rooms` (æˆ¿æ•¸)ï¼šæ”¯æ´å¤šé¸ï¼ˆä¾‹å¦‚ `--rooms 2 3`ï¼Œæ‰¾ 2 åˆ° 3 æˆ¿ï¼‰
- `--year` (äº¤æ˜“å¹´ä»½)ï¼šä½¿ç”¨**æ°‘åœ‹å¹´**ï¼Œæ”¯æ´å€é–“æˆ–å–®ä¸€å¹´ä»½ï¼ˆä¾‹å¦‚ `--year 110-114`ï¼‰
- `--ping` (åªæ•¸)ï¼šç¸½åªæ•¸å€é–“ï¼ˆä¾‹å¦‚ `--ping 30-50`ï¼‰
- `--price` (ç¸½åƒ¹)ï¼šå€é–“è¨­å®šï¼Œå–®ä½æ˜¯**è¬å…ƒ**ï¼ˆä¾‹å¦‚ `--price 1000-2000`ï¼‰
- `--unit-price` (å–®åªåƒ¹)ï¼šå€é–“è¨­å®šï¼Œå–®ä½æ˜¯**è¬/åª**
- `--public-ratio` (å…¬è¨­æ¯”)ï¼šå€é–“è¨­å®šï¼Œå–®ä½æ˜¯ `%`ï¼ˆå¦‚ `--public-ratio 0-30`ï¼‰

### ğŸ“Œ æ’åºæ–¹å¼ `--sort` 

- `date`ï¼šäº¤æ˜“æ—¥æœŸå¾æ–°åˆ°èˆŠï¼ˆé è¨­ï¼‰
- `price`ï¼šç¸½åƒ¹å¾é«˜åˆ°ä½ï¼ˆæœ€è²´å„ªå…ˆï¼‰
- `unit_price`ï¼šå–®åªåƒ¹æ ¼å¾é«˜åˆ°ä½
- `count`ï¼šåŒåœ°å€äº¤æ˜“ç­†æ•¸å¾é«˜åˆ°ä½ï¼ˆç†±é–€äº¤æ˜“ç¤¾å€å„ªå…ˆï¼‰
- `ping`ï¼šåªæ•¸å¾å¤§åˆ°å°
- `public_ratio`ï¼šå…¬è¨­æ¯”å¾å°åˆ°å¤§ï¼ˆä½å…¬è¨­å„ªå…ˆï¼‰

### ğŸ› ï¸ è¼¸å‡ºèˆ‡é€²éšé¸é …

- `--limit`ï¼šé™åˆ¶é¡¯ç¤ºç­†æ•¸ï¼ˆé è¨­ 200ï¼‰
- `--export <æª”å.csv>`ï¼šå°‡çµæœåŒ¯å‡ºæˆ CSV æª”ä¾›å¾ŒçºŒåˆ†æ
- `--show-sql`ï¼šé¡¯ç¤ºåº•å±¤ç”¨åˆ°ä»€éº¼ç­–ç•¥èˆ‡è§£æçµæœï¼ˆé™¤éŒ¯ç”¨ï¼‰
- `--no-variants`ï¼šä¸å°å‡ºç¨‹å¼è‡ªå‹•ç”¢ç”Ÿçš„æœå°‹è®Šé«”åˆ—è¡¨ï¼Œè®“ç•«é¢æ›´ç°¡æ½”

---

## ğŸ† å¯¦ç”¨çµ„åˆç¯„ä¾‹

**ç¯„ä¾‹ä¸€ï¼šæ‰¾å°‹ç‰¹å®šç¤¾å€/è·¯æ®µæœ‰æ²’æœ‰ã€Œ3æˆ¿ã€çš„ã€Œå¤§æ¨“ã€ï¼Œä¸”è¿‘å››å¹´äº¤æ˜“**
```bash
python3 address_match/address_match.py "æ—¥èˆˆä¸€è¡—52è™Ÿ" --type ä½å®…å¤§æ¨“ --rooms 3 --year 110-114
```

**ç¯„ä¾‹äºŒï¼šåœ¨é€™å€‹è·¯æ®µä¸Šï¼Œå°‹æ‰¾ç¸½åƒ¹åœ¨ 1000~2000 è¬ï¼Œä¸”åªæ•¸åœ¨ 30~50 åªçš„å…¬å¯“**
```bash
python3 address_match/address_match.py "ä¸‰æ°‘è·¯29å··" --type å…¬å¯“ --price 1000-2000 --ping 30-50
```

**ç¯„ä¾‹ä¸‰ï¼šæ‰¾é€™æ¢è·¯ä¸Šã€Œæœ€è²´ã€æˆ–ã€Œå–®åƒ¹æœ€é«˜ã€çš„äº¤æ˜“**
```bash
# ç”¨å–®åªåƒ¹é«˜åˆ°ä½æ’åºï¼Œé™åˆ¶åªçœ‹å‰ 10 ç­†
python3 address_match/address_match.py "ä¸‰æ°‘è·¯" --sort unit_price --limit 10
```

**ç¯„ä¾‹å››ï¼šæ‰¾ä½å…¬è¨­çš„å¤§æˆ¿å­ï¼Œä¸¦å°‡çµæœåŒ¯å‡ºä½œå ±å‘Š**
```bash
# æ‰¾å…¬è¨­æ¯”å°æ–¼ 30% ( -30 å°±æ˜¯ä¸Šé™ 30 çš„æ„æ€ )ï¼Œè¶…é 40 åªçš„æˆ¿å­ï¼Œå­˜åˆ° csv
python3 address_match/address_match.py "å…‰å¾©å—è·¯" --public-ratio -30 --ping 40- --export result.csv
```
